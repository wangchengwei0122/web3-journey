# Web3 å‰ç«¯å¼€å‘ä¸­çš„ BigInt ä¸ Decimals ç²¾åº¦è½¬æ¢ä¸æ˜¾ç¤º

> æœ¬æ–‡é€‚ç”¨äºä½¿ç”¨ **Viem** + **Wagmi** + **Next.js** çš„å‰ç«¯å¼€å‘è€…ï¼Œè®²è§£å¦‚ä½•æ­£ç¡®å¤„ç†é“¾ä¸Šæ•°å­—å•ä½ `BigInt` ä¸å°æ•°ä½ `decimals`ï¼Œå®ç° **é‡‘é¢çš„æ­£ç¡®è½¬æ¢ä¸æ˜¾ç¤º**ã€‚

---

## ğŸ“š ç›®å½•

- [Web3 å‰ç«¯å¼€å‘ä¸­çš„ BigInt ä¸ Decimals ç²¾åº¦è½¬æ¢ä¸æ˜¾ç¤º](#web3-å‰ç«¯å¼€å‘ä¸­çš„-bigint-ä¸-decimals-ç²¾åº¦è½¬æ¢ä¸æ˜¾ç¤º)
  - [ğŸ“š ç›®å½•](#-ç›®å½•)
  - [ğŸ§  èƒŒæ™¯çŸ¥è¯†](#-èƒŒæ™¯çŸ¥è¯†)
  - [ğŸ’¡ ä¸ºä»€ä¹ˆé“¾ä¸Šå¿…é¡»ä½¿ç”¨ BigInt](#-ä¸ºä»€ä¹ˆé“¾ä¸Šå¿…é¡»ä½¿ç”¨-bigint)
  - [ğŸ”¢ ä»€ä¹ˆæ˜¯ decimalsï¼ˆç²¾åº¦ï¼‰](#-ä»€ä¹ˆæ˜¯-decimalsç²¾åº¦)
  - [ğŸ§° å¸¸ç”¨è½¬æ¢å·¥å…·å‡½æ•°](#-å¸¸ç”¨è½¬æ¢å·¥å…·å‡½æ•°)
  - [âœï¸ å‰ç«¯è¾“å…¥ âœ é“¾ä¸Šå•ä½ï¼š`parseUnits`](#ï¸-å‰ç«¯è¾“å…¥--é“¾ä¸Šå•ä½parseunits)
  - [âœï¸ å‰ç«¯è¾“å…¥ âœ è½¬é“¾ä¸Šï¼šå¿…é¡»è½¬ä¸º BigInt](#ï¸-å‰ç«¯è¾“å…¥--è½¬é“¾ä¸Šå¿…é¡»è½¬ä¸º-bigint)
  - [ğŸ“¤ é“¾ä¸Šå€¼ âœ UI æ˜¾ç¤ºï¼š`formatUnits`](#-é“¾ä¸Šå€¼--ui-æ˜¾ç¤ºformatunits)
  - [ğŸ“Œ ä»åˆçº¦è¯»å–çš„ BigInt æ•°å€¼åº”ä½¿ç”¨ formatUnits æ ¼å¼åŒ–åå†å±•ç¤ºåˆ° UIã€‚](#-ä»åˆçº¦è¯»å–çš„-bigint-æ•°å€¼åº”ä½¿ç”¨-formatunits-æ ¼å¼åŒ–åå†å±•ç¤ºåˆ°-ui)

---

## ğŸ§  èƒŒæ™¯çŸ¥è¯†

ä»¥å¤ªåŠé“¾ä¸Šæ‰€æœ‰ä»£å¸æ•°å€¼ **åªèƒ½ä»¥æ•´æ•°å­˜å‚¨å’Œä¼ è¾“**ï¼Œå°æ•°çš„æ¦‚å¿µæ˜¯é€šè¿‡ `decimals` ç²¾åº¦æ¥æ¨¡æ‹Ÿçš„ã€‚

**ç¤ºä¾‹ï¼š**
- ETH ç²¾åº¦ä¸º `18`ï¼Œ1 ETH = `10^18` wei
- USDC ç²¾åº¦ä¸º `6`ï¼Œ1 USDC = `10^6` æœ€å°å•ä½

---

## ğŸ’¡ ä¸ºä»€ä¹ˆé“¾ä¸Šå¿…é¡»ä½¿ç”¨ BigInt

JavaScript çš„æ™®é€šæ•°å­—ç±»å‹ `Number` æœ€å¤§å®‰å…¨å€¼æ˜¯ `2^53 - 1 â‰ˆ 9 * 10^15`ï¼Œä½†é“¾ä¸Šå¸¸è§çš„å•ä½ï¼ˆå¦‚ 1 ETH = 10^18 weiï¼‰**è¿œè¿œè¶…å‡ºè¿™ä¸ªèŒƒå›´**ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»ä½¿ç”¨ï¼š

```ts
1234567890123456789n // âœ… BigInt ç±»å‹ï¼ˆæ³¨æ„åç¼€ `n`ï¼‰
```
## ğŸ”¢ ä»€ä¹ˆæ˜¯ decimalsï¼ˆç²¾åº¦ï¼‰

ä»£å¸åˆçº¦ä¸­å®šä¹‰çš„ `decimals` å†³å®šäº†è¿™ä¸ª Token æœ‰å¤šå°‘ä½å°æ•°ã€‚

| Token | decimals | ç¤ºä¾‹ |
|-------|----------|------|
| ETH   | 18       | 1 ETH = 1e18 wei |
| USDC  | 6        | 1 USDC = 1e6 å•ä½ |
| DAI   | 18       | 1 DAI = 1e18 å•ä½ |

---

## ğŸ§° å¸¸ç”¨è½¬æ¢å·¥å…·å‡½æ•°

Viem ä¸­æä¾›äº†ä»¥ä¸‹ 4 ä¸ªè½¬æ¢å‡½æ•°ï¼š

| å‡½æ•°å                 | ç”¨é€”                        | ç¤ºä¾‹ |
|------------------------|-----------------------------|------|
| `parseEther`           | `"1.23"` ETH âœ weiï¼ˆ18ä½ï¼‰ | `parseEther('1.23')` |
| `formatEther`          | wei âœ `"1.23"` ETH         | `formatEther(1230000000000000000n)` |
| `parseUnits(value, decimals)` | ä»»æ„å°æ•°å•ä½ âœ BigInt     | `parseUnits('10.5', 6)` â†’ `10500000n` |
| `formatUnits(value, decimals)` | BigInt âœ äººç±»å¯è¯»å­—ç¬¦ä¸² | `formatUnits(10500000n, 6)` â†’ `'10.5'` |

---

## âœï¸ å‰ç«¯è¾“å…¥ âœ é“¾ä¸Šå•ä½ï¼š`parseUnits`

```ts
import { parseUnits } from 'viem'

const amount = parseUnits('10.5', 6)
// => 10500000n
```
## âœï¸ å‰ç«¯è¾“å…¥ âœ è½¬é“¾ä¸Šï¼šå¿…é¡»è½¬ä¸º BigInt

åœ¨ä¼ å…¥åˆçº¦ä¹‹å‰ï¼Œ**å¿…é¡»å°†ç”¨æˆ·è¾“å…¥çš„é‡‘é¢ï¼ˆå¦‚ "10.5"ï¼‰è½¬æ¢æˆé“¾ä¸Šè¯†åˆ«çš„æ•´æ•° BigInt ç±»å‹**ã€‚

---

## ğŸ“¤ é“¾ä¸Šå€¼ âœ UI æ˜¾ç¤ºï¼š`formatUnits`

```ts
import { formatUnits } from 'viem'

const balance = 10500000n
const display = formatUnits(balance, 6)
// => '10.5'
```

## ğŸ“Œ ä»åˆçº¦è¯»å–çš„ BigInt æ•°å€¼åº”ä½¿ç”¨ formatUnits æ ¼å¼åŒ–åå†å±•ç¤ºåˆ° UIã€‚

ğŸ” å®Œæ•´ç¤ºä¾‹ï¼ˆERC20 è½¬è´¦ï¼‰
```ts
import { parseUnits } from 'viem'
import { useAccount, useWriteContract, erc20Abi } from 'wagmi'

const { address } = useAccount()
const { writeContractAsync } = useWriteContract()

async function transferUSDC() {
  const amount = parseUnits('10.5', 6) // ç”¨æˆ·è¾“å…¥ "10.5"

  await writeContractAsync({
    address: '0xUSDC_CONTRACT_ADDRESS',
    abi: erc20Abi,
    functionName: 'transfer',
    args: ['0xRecipient', amount],
    account: address,
  })
}
```
